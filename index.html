<!DOCTYPE html>
<html lang="eng"><head>
<script src="slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="slides_files/libs/quarto-html/popper.min.js"></script>
<script src="slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="slides_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="slides_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="slides_files/libs/quarto-contrib/videojs/video.min.js"></script>
<link href="slides_files/libs/quarto-contrib/videojs/video-js.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.549">

  <meta name="author" content="Ramil Khusainov">
  <title>Modern control for dynamic legged robots</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="slides_files/libs/revealjs/dist/theme/quarto.css">
  <link href="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Modern control for dynamic legged robots</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ramil Khusainov 
</div>
<div class="quarto-title-author-email">
<a href="mailto:rrasikhusainov@sberbank.ru">rrasikhusainov@sberbank.ru</a>
</div>
        <p class="quarto-title-affiliation">
            <a href="https://sberlabs.com/laboratories/tsentr-robototekhniki/">
            Sberbank Robotics Laboratory
            </a>
          </p>
    </div>
</div>

  <p class="date">Jan 30, 2024</p>
</section>
<section id="agenda" class="slide level2">
<h2>Agenda</h2>
<ul>
<li>Importance of robot legged locomotion problem</li>
<li>Two views of the solution</li>
<li>Dynamic models</li>
<li>Optimal control problem</li>
<li>Quadruped robot legged locomotion</li>
<li>Biped trajectory optimization</li>
<li>Insights in reinforcement learning</li>
</ul>
</section>
<section id="legged-robots-are-cool" class="slide level2">
<h2>Legged robots are cool…</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>High mobility. Able to traverse different types of terrains, step over obstacles</li>
<li>Fascinating fusion of biological inspiration and engineered design. Ideal platform to implement “athletic intelligence”</li>
</ul>
</div><div class="column" style="width:10%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-top">
<figure>
<p><img data-src="images/figures/pingpong.gif" class="quarto-figure quarto-figure-top" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="but-challenging" class="slide level2">
<h2>…But Challenging</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Robust mechanical design</li>
<li>Advanced sensing and state estimation</li>
<li>Efficient energy management</li>
<li>Sophisticated control</li>
</ul>
<ol type="1">
<li>Complex, multi-DOF underactuated system</li>
<li>Hybrid in nature</li>
<li>Uncertain models, conditions</li>
</ol>
</div><div class="column" style="width:10%;">
<!-- empty column to create gap -->
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/figures/atlas_fall.gif" class="quarto-figure quarto-figure-left" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="new-generation-of-humanoid-robots" class="slide level2">
<h2>New generation of humanoid robots</h2>
<div class="quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/digit_agility.jpg" height="400"></p>
<figcaption>Digit/Agility</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/optimus_tesla.jpg" height="400"></p>
<figcaption>Optimus/Tesla</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/unitree_h1.jpg" height="400"></p>
<figcaption>H1/Unitree</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="lets-create-general-purpose-robot" class="slide level2">
<h2>Let’s create general purpose robot!</h2>
<h3 id="robots-in-our-lab">Robots in our lab</h3>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="images/figures/b1z1.png"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/fourier_gr1.jpg" class="quarto-figure quarto-figure-center" height="500"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="recent-progress" class="slide level2">
<h2>Recent progress</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/figures/Tesla_Optimus_Bot_Folds_Laundry.gif" class="quarto-figure quarto-figure-left" style="width:100.0%"></p>
<figcaption>Tesla Optimus Folds Laundry</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/figures/Unitree_Generalpupose_Humanoid_Robot_H1_Evolution_V20.gif" class="quarto-figure quarto-figure-left" style="width:100.0%"></p>
<figcaption>Unitree H1 walking on uneven terrain</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="optimal-control-vs-reinforcement-learning" class="slide level2">
<h2>Optimal control vs Reinforcement Learning</h2>
<!-- ::: {layout="[[1, 1]]"} -->
<!-- .caption{
   text-align: center;
} -->
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/MPC.png"></p>
<figcaption>Model Predictive Control</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/RL2.png" width="410"></p>
<figcaption>Reinforcement Learning</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div style="font-size: 80%;">
<ul>
<li>Online compute vs Online lookup</li>
<li>Time-indexed vs State-indexed</li>
<li>Model-based vs Model-free</li>
</ul>
</div>
</section>
<section id="dynamic-models-for-legged-systems" class="slide level2">
<h2>Dynamic models for legged systems</h2>
<h3 id="rigid-body-dynamics">Rigid Body Dynamics</h3>
<div style="font-size: 80%;">
<p><span class="math display">\[
\mathbf{M}(\mathbf{q}) \ddot{\mathbf{q}}+\mathbf{h}(\mathbf{q}, \dot{\mathbf{q}})=\mathbf{S}^T \boldsymbol{\tau}+\mathbf{J}(\mathbf{q})^T \mathbf{f},
\]</span></p>
<p>where <span class="math inline">\(\mathbf{M} \in \mathbb{R}^{(6+n) \times(6+n)}\)</span> is the joint-space inertia matrix, <span class="math inline">\(\mathbf{h} \in \mathbb{R}^{6+n}\)</span> is the effect of Centrifugal, Coriolis and gravity terms, <span class="math inline">\(\mathbf{S}^T=\left[\begin{array}{ll}\mathbf{0}_{n \times 6} &amp; \mathbf{I}_{n \times n}\end{array}\right]^T\)</span> is a Selection Matrix which applies the torque <span class="math inline">\(\boldsymbol{\tau}\)</span> to only the <span class="math inline">\(n\)</span> joint rows and the Jacobian <span class="math inline">\(\mathbf{J}\)</span> maps forces <span class="math inline">\(\mathbf{f}=\left[\mathbf{f}_1^T, \ldots, \mathbf{f}_{n_i}^T\right]^T \in \mathbb{R}^{3 n_i}\)</span> at the <span class="math inline">\(n_i\)</span> end-effectors to <span class="math inline">\(6+n\)</span> dimensional generalized forces.</p>
<p>Split into 6 unactuated <span class="math inline">\((u)\)</span> and <span class="math inline">\(n\)</span> actuated rows: <span class="math display">\[
\begin{aligned}
&amp; \mathbf{M}_u(\mathbf{q}) \ddot{\mathbf{q}}+\mathbf{h}_u(\mathbf{q}, \dot{\mathbf{q}})=\mathbf{J}_u(\mathbf{q})^T \mathbf{f} \\
&amp; \mathbf{M}_a(\mathbf{q}) \ddot{\mathbf{q}}+\mathbf{h}_a(\mathbf{q}, \dot{\mathbf{q}})=\boldsymbol{\tau}+\mathbf{J}_a(\mathbf{q})^T \mathbf{f},
\end{aligned}
\]</span></p>
<p>A torque <span class="math inline">\(\boldsymbol{\tau}\)</span> cannot directly influence the base motion of the robot!</p>
</div>
<p><img data-src="images/figures/WBC1.png" class="absolute" style="top: 400px; right: 50px; width: 150px; "></p>
</section>
<section id="dynamic-models-for-legged-systems-1" class="slide level2">
<h2>Dynamic models for legged systems</h2>
<h3 id="centroidal-dynamics">Centroidal Dynamics</h3>
<p>By expressing the change of momentum in a frame anchored at the current Center of Mass <span class="math inline">\((\mathrm{CoM})\)</span> <span class="math inline">\(\mathbf{r}\)</span>, also called centroid, we can rewrite the dynamics expressed in RBD model as <span class="math display">\[
\mathbf{A}(\mathbf{q}) \ddot{\mathbf{q}}+\dot{\mathbf{A}}(\mathbf{q}) \dot{\mathbf{q}}=\left[\begin{array}{l}
m \mathbf{g}+\sum_{i=1}^{n_i} \mathbf{f}_i \\
\sum_{i=1}^{n_i} \mathbf{f}_i \times\left(\mathbf{r}(\mathbf{q})-\mathbf{p}_i(\mathbf{q})\right)
\end{array}\right]
\]</span></p>
<p>Centroidal Momentum Matrix <span class="math inline">\(\mathbf{A} ∈ R^{6×(6+n)}\)</span> maps the velocities, and therefore momentum, of each individual body into a common reference frame, expressed at the CoM.</p>
</section>
<section id="dynamic-models-for-legged-systems-2" class="slide level2">
<h2>Dynamic models for legged systems</h2>
<h3 id="single-rigid-body-dynamics">Single Rigid Body Dynamics</h3>
<ul>
<li>Momentum produced by the joint velocities is negligible</li>
<li>Full-body inertia remains similar to the one in nominal joint position</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="math display">\[
\begin{aligned}
m \mathbf{\ddot{r}}&amp;=m\mathbf{g} + \sum{\mathbf{f}_i} \\
\frac{d}{dt}(\mathbf{I\omega})&amp;= \sum{\mathbf{f}_i \times (\mathbf{r}-\mathbf{p}_i)}
\end{aligned}
\]</span></p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/figures/potato.png" style="width:80.0%"></p>
</div>
</div>
</section>
<section id="dynamic-models-for-legged-systems-3" class="slide level2">
<h2>Dynamic models for legged systems</h2>
<h3 id="linear-inverted-pendulum-model">Linear Inverted Pendulum Model</h3>
<ul>
<li>CoM height <span class="math inline">\(\mathbf{r_z}\)</span> is constant</li>
<li>Angular velocity <span class="math inline">\(\mathbf{\omega}\)</span> and acceleration <span class="math inline">\(\mathbf{\dot{\omega}}\)</span> of the base are zero</li>
<li>Footholds are at constant height</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="math display">\[
m \ddot{r}_x = \frac{mg}{h}(r_x-p_{c,x})
\]</span></p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/figures/lipm.png" style="width:50.0%"></p>
</div>
</div>
</section>
<section id="tree-of-dynamic-models" class="slide level2">
<h2>Tree of dynamic models</h2>

<img data-src="images/figures/tree_of_dynamic_models.png" class="r-stretch"></section>
<section id="contact-models" class="slide level2">
<h2>Contact models</h2>
<div style="font-size: 90%;">
<p>Contacts can be modeled as either rigid or visco-elastic:</p>
<ul>
<li>Visco-elastic models ensure continuous dynamics but lead to stiff differential equations with corresponding numerical challenges for simulation and optimization</li>
<li>In rigid contact model the dynamics becomes hybrid because when two points make contact, their relative velocity must immediately become zero to avoid penetration</li>
</ul>
<p><span class="math display">\[
\renewcommand{\vec}[1]{\mathbf{#1}}
\begin{aligned}
\vec{M}(\vec{q}^-)(\vec{\dot{q}^+} - \vec{\dot{q}^-}) &amp;= \vec{J}^T_c(\vec{q}^-) \vec{F} \\
\vec{J}_c(\vec{q}^-)\vec{\dot{q}^+} &amp;= \vec{0}
\end{aligned}
\]</span></p>
<div class="columns">
<div class="column" style="width:55%;">
<p>results in discrete transition map <span class="math display">\[
\vec{x}^+ = \Delta (\vec{x}^-)
\]</span></p>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/dynamics_guard.png"></p>
<figcaption>Visualization of guard</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="optimal-control-problem" class="slide level2">
<h2>Optimal Control Problem</h2>
<h3 id="problem-formulation">Problem formulation</h3>
<p>Model-based optimization for the real-time generation and control of movement.</p>
<p><span class="math display">\[
\begin{aligned}
&amp; \underset{x, u, f}{\text{minimize}}
&amp; &amp; cost(x(t), f(t), u(t)) \\
&amp; \text{subject to}
&amp; &amp; M(q) \ddot{q}+h(q, \dot{q})=S^T \tau+J(q)^T f\\
&amp; &amp; &amp; ContactConstraints(x(t), f(t), u(t), Env) \\
&amp; &amp; &amp; KinematicsConstraints(x(t)) \\
&amp; &amp; &amp; InputConstraints(u(t), x(t)) \\
&amp; &amp; &amp; TaskConstraints(x(t), u(t), f(t)), \quad \forall t.
\end{aligned}
\]</span></p>
</section>
<section id="optimal-control-problem-1" class="slide level2">
<h2>Optimal Control Problem</h2>
<h3 id="contact-constraints">Contact Constraints</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/friction_cone.jpg" style="width:70.0%"></p>
<figcaption>Friction Cone</figcaption>
</figure>
</div>
<div style="font-size: 80%;">
<p><span class="math display">\[
FC = \{ f| f_z \geq 0, \sqrt{f_x^2+f_y^2} \leq \mu f_z  \}
\]</span></p>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/CWC.png" style="width:45.0%"></p>
<figcaption>Contact Wrench Cone</figcaption>
</figure>
</div>
<div style="font-size: 80%;">
<p><span class="math display">\[
\begin{aligned}
|f_x| \leq \mu f_z, \quad |f_y| \leq \mu f_z, \quad f_z \geq 0 \\
|\tau _x| \leq Y f_z, \quad |\tau _y| \leq X f_z, \quad \tau_{min} \leq \tau_z \leq \tau_{max}
\end{aligned}
\]</span></p>
</div>
</div>
</div>
</section>
<section id="optimal-control-problem-2" class="slide level2">
<h2>Optimal Control Problem</h2>
<h3 id="kinematics-constraints">Kinematics Constraints</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/bboxes.png" style="width:61.0%"></p>
<figcaption>Joint angle and joint velocity limits</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/self_collision.png" style="width:50.0%"></p>
<figcaption>Self collision</figcaption>
</figure>
</div>
</div>
</div>
<!-- ## Quadruped robot dynamic locomotion
### Unitree A1 with external GPU and Lidar

![](images/figures/a1.png){fig-align="center"} -->
</section>
<section id="legged-robot-dynamic-locomotion" class="slide level2">
<h2>Legged robot dynamic locomotion</h2>
<h3 id="hierarchical-control">Hierarchical control</h3>

<img data-src="images/figures/Control%20system%20diagram.drawio.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="legged-robot-dynamic-locomotion-1" class="slide level2">
<h2>Legged robot dynamic locomotion</h2>
<h3 id="mpc-as-a-local-planner">MPC as a local planner</h3>
<ul>
<li>Leg contact schedule is known</li>
<li>Foothold positions are known</li>
<li>Robot trajectory lies close to the reference one</li>
</ul>
<p><img data-src="images/figures/potato.png" class="absolute" style="top: 70px; right: 0px; width: 300px; "></p>
<div style="font-size: 80%;">
<p><span class="math display">\[
\begin{aligned}
\frac{\mathrm{d}}{\mathrm{d} t}\left[\begin{array}{c}
{\mathbf{\Theta}} \\
{\mathbf{p}} \\
{\boldsymbol{\omega}} \\
{\mathbf{\dot{p}}}
\end{array}\right] &amp; =\left[\begin{array}{cccc}
\mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{R}_{z}(\psi) &amp; \mathbf{0}_{3} \\
\mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{1}_{3} \\
\mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{0}_{3} \\
\mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{0}_{3} &amp; \mathbf{0}_{3}
\end{array}\right]\left[\begin{array}{c}
{\mathbf{\Theta}} \\
{\mathbf{p}} \\
{\boldsymbol{\omega}} \\
{\mathbf{\dot{p}}}
\end{array}\right]+
{\left[\begin{array}{cccc}
\mathbf{0}_{3} &amp; \ldots &amp; \mathbf{0}_{3} \\
\mathbf{0}_{3} &amp; \ldots &amp; \mathbf{0}_{3} \\
\hat{\mathbf{I}}^{-1}\left[\mathbf{r}_{1}\right]_{\times} &amp; \ldots &amp; \hat{\mathbf{I}}^{-1}\left[\mathbf{r}_{n}\right]_{\times} \\
\mathbf{1}_{3} / m &amp; \cdots &amp; \mathbf{1}_{3} / m
\end{array}\right]\left[\begin{array}{c}
\mathbf{f}_{1} \\
\vdots \\
\mathbf{f}_{n}
\end{array}\right]+\left[\begin{array}{c}
0 \\
0 \\
0 \\
\mathbf{g}
\end{array}\right] }
\end{aligned}
\]</span></p>
</div>
<p>Get Linear Time Varying system with linear constraints on forces (friction cone) and use Quadratic Programming.</p>
</section>
<section id="legged-robot-dynamic-locomotion-2" class="slide level2">
<h2>Legged robot dynamic locomotion</h2>
<h3 id="whole-body-control">Whole body control</h3>
<div style="font-size: 80%;">
<p>Find desired torques <span class="math inline">\(\vec{\tau}\)</span> based on desired Ground Reaction Forces <span class="math inline">\(\vec{f_d}\)</span> and desired positions.</p>
<!-- $$
\begin{aligned}
& \Delta \mathbf{q}_i=\Delta \mathbf{q}_{i-1}+J_{i \mid p r e}^{\dagger}\left(\mathbf{e}_i-J_i \Delta \mathbf{q}_{i-1}\right) \\
& \dot{\mathbf{q}}_i^{\mathrm{cmd}}=\dot{\mathbf{q}}_{i-1}^{\mathrm{cmd}}+J_{i \mid p r e}^{\dagger}\left(\dot{\mathbf{x}}_i^{\mathrm{des}}-\boldsymbol{J}_i \dot{\mathbf{q}}_{i-1}^{\mathrm{cmd}}\right) \\
& \ddot{\mathbf{q}}_i^{\mathrm{cmd}}=\ddot{\mathbf{q}}_{i-1}^{\mathrm{cmd}}+\overline{\boldsymbol{J}_{i \mid p r e}^{\mathrm{dyn}}}\left(\ddot{\mathbf{x}}_i^{\mathrm{cmd}}-\dot{\boldsymbol{J}}_i \dot{\mathbf{q}}-\boldsymbol{J}_i \ddot{\mathbf{q}}_{i-1}^{\mathrm{cmd}}\right)
\end{aligned}
$$

$$
\begin{aligned}
& \min _{\delta_{\mathbf{f}_r}, \delta_f} \delta_{\mathbf{f}_r}^{\top} Q_1 \delta_{\mathbf{f}_r}+\delta_f^{\top} Q_2 \delta_f \\
& \text { s.t. } \\
& S_f(A \ddot{\mathrm{q}}+\mathrm{b}+\mathrm{g})=S_f J_c^{\top} \mathrm{f}_r \quad \text { (floating base dyn.) } \\
& \ddot{\mathrm{q}}=\ddot{\mathrm{q}}^{\mathrm{cmd}}+\left[\begin{array}{c}
\delta_f \\
0_{n_j}
\end{array}\right] \quad \text { (acceleration) } \\
& \mathrm{f}_r=\mathrm{f}_r^{\mathrm{MPC}}+\delta_{\mathbf{f}_r} \quad \text { (reaction forces) } \\
& W \mathrm{f}_r \geq 0, \quad \text { (contact force constraints) } \\
&
\end{aligned}
$$ -->
<p><span class="math display">\[
\begin{aligned}
\min _{\ddot{\boldsymbol{q}}, \boldsymbol{\tau}, \boldsymbol{f}} &amp; \left\|\boldsymbol{J}_t \ddot{\boldsymbol{q}}+\dot{\boldsymbol{J}}_t \dot{\boldsymbol{q}}-\dot{\boldsymbol{v}}_t\right\|_{Q_t}^2+\left\|\boldsymbol{e}_u\right\|_{R_u}^2+\|\boldsymbol{\tau}\|_{R_\tau}^2 \\
\text { s.t. } &amp; \boldsymbol{M} \ddot{\boldsymbol{q}}+\boldsymbol{c}=\boldsymbol{S}_a^{\top} \boldsymbol{\tau}+\boldsymbol{J}_c^{\top} \boldsymbol{f} \\
&amp; \boldsymbol{J}_c \ddot{\boldsymbol{q}}+\dot{\boldsymbol{J}}_c \dot{\boldsymbol{q}}=\mathbf{0} \\
&amp; \text { friction cone constraint: } \boldsymbol{u} \in \mathbb{U}, \\
&amp; |\boldsymbol{\tau}| \leq \boldsymbol{\tau}_{\max },|\ddot{\boldsymbol{q}}| \leq \ddot{\boldsymbol{q}}_{\text {max }},
\end{aligned}
\]</span></p>
<p>where <span class="math inline">\(\boldsymbol{J}_t\)</span> is the task Jacobian matrix, <span class="math inline">\(\boldsymbol{\dot{v}}_t\)</span> is the commanded task dynamics; <span class="math inline">\(\boldsymbol{e}_f = \boldsymbol{f}_d - \boldsymbol{f}\)</span> is the deviation from the desired GRW.</p>
<p>Desired task positions of foot and torso are derived used PD scheme in task space:</p>
<p><span class="math display">\[
\boldsymbol{\dot{v}}_t = \boldsymbol{\ddot{p}}^d + \boldsymbol{K}_P(\boldsymbol{p}^d - \boldsymbol{p}) + \boldsymbol{K}_D(\boldsymbol{\dot{p}}^d-\boldsymbol{\dot{p}})
\]</span></p>
</div>
</section>
<section id="legged-robot-dynamic-locomotion-3" class="slide level2">
<h2>Legged robot dynamic locomotion</h2>
<h3 id="elevation-map-and-foothold-adaptation">Elevation map and Foothold adaptation</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div style="font-size: 75%;">
<p>Batch-search around the nominal foothold in elevation map with the following scoring and constraints:</p>
<ul>
<li>Min surface quality measure (slopes, roughness, edges)</li>
<li>Min distance to edge (edge distance field)</li>
<li>Max step height</li>
<li>Kinematic reachability</li>
<li>Max swing velocity during continuous update</li>
<li>Scoring: surface quality + stability criteria + distance to nominal foothold.</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/figures/elevation_map.png"></p>
</div>
</div>
</section>
<section id="legged-robot-dynamic-locomotion-4" class="slide level2">
<h2>Legged robot dynamic locomotion</h2>
<h3 id="gait-scheduler">Gait Scheduler</h3>
<div class="columns">
<div class="column" style="width:70%;">
<p><img data-src="images/figures/scheduler.jpg" style="width:100.0%"></p>
</div><div class="column" style="width:30%;">
<div style="font-size: 70%;">
<p>Time scale factor K: <span class="math display">\[
\begin{gathered}
\dot{K}=C_k(1-K)+C_{\ddot{p}_c}\left\|\ddot{p}_c\right\|^2-C_{k_G}\left\|\boldsymbol{k}_G\right\|^2 \\
\dot{K}_{l b} \leq \dot{K} \leq \dot{K}_{u b}, K_{l b} \leq K \leq K_{u b}
\end{gathered}
\]</span></p>
</div>
</div>
</div>
</section>
<section id="quadruped-robot-dynamic-locomotion" class="slide level2">
<h2>Quadruped robot dynamic locomotion</h2>
<iframe data-external="1" src="https://www.youtube.com/embed/NjJO0jSLSFc" width="100%" height="85%" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</section>
<section id="biped-robot-dynamic-locomotion" class="slide level2">
<h2>Biped robot dynamic locomotion</h2>
<!-- ### Same approach is applicable to bipeds -->
<p>Same approach is applicable to bipeds and widely used in hardware</p>
<p><video data-src="videos/gr1_wbc.mp4" style="width:80.0%" loop="true" controls=""><a href="videos/gr1_wbc.mp4">Video</a></video></p>
<!-- :::: {.columns}

::: {.column width="5%"}
:::

::: {.column width="55%"}
![](images/figures/MITa.gif)
![](videos/gr1_wbc.mp4){loop="true"}
:::


::: {.column width="2%"}
:::


::: {.column width="32%"}
![](images/figures/deep_robotics.gif)
:::

:::: -->
</section>
<section id="biped-trajectory-optimization" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<!-- ### Same approach is applicable to bipeds -->
<p>For biped getting the dynamically feasible human-like walking become challenging, however some of the robots already can do even more…</p>
<iframe data-external="1" src="https://www.youtube.com/embed/-e1_QhJ1EhQ" width="100%" height="65%" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</section>
<section id="biped-trajectory-optimization-1" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<h3 id="methematical-formulation">Methematical Formulation</h3>
<div style="font-size: 80%;">
<p>The general pipline is to formulate infinite optimization problem in continues time and transcript to finite discrete space:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="math display">\[\begin{equation}
\begin{aligned}
\min _{\mathbf{x}(t), \mathbf{u}(t)} &amp; \ell_f\left(\mathbf{x}\left(t_f\right)\right)+\int_{t_0}^{t_f} \ell(\mathbf{x}(t), \mathbf{u}(t)) d t \\
\text { subject to } &amp; \dot{\mathbf{x}}(t)=f(\mathbf{x}(t), \mathbf{u}(t)), \quad \forall t \in\left[t_0, t_f\right] \\
&amp; \mathbf{x}\left(t_0\right)=\mathbf{x}_0
\end{aligned}
\end{equation}\]</span></p>
</div><div class="column" style="width:50%;">
<p><span class="math display">\[\begin{equation}
\begin{aligned}
\min _{\mathbf{x}_k, \mathbf{u}_k} &amp; \ell_f\left(\mathbf{x}_N\right)+\sum_{k_0}^{N-1} \ell\left(\mathbf{x}_k, \mathbf{u}_k\right) \\
\text { subject to } &amp; \mathbf{x}_{k+1}=\mathbf{f}_d\left(\mathbf{x}_k, \mathbf{u}_k\right), \quad \forall k \in[0, N-1] \\
&amp; \mathbf{x}_0=\mathbf{x}(0) \\
&amp; + \text { other constraints }
\end{aligned}
\end{equation}\]</span></p>
</div>
</div>
<!-- One should answer the following:  -->
<ul>
<li>Where to get dynamics? (preferably given by urdf)</li>
<li>How to transmit from continues OCP to numerical optimization with finite amount of variables? (transcription)</li>
<li>How to solve this problem and get the derivatives for gradient/Newton methods? (solver and AD)</li>
</ul>
</div>
</section>
<section id="biped-trajectory-optimization-2" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<h3 id="components-of-trajectory-optimization">Components of Trajectory Optimization</h3>
<div class="columns">
<div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/pinnochio_logo.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
<figcaption>Pinocchio - Rigid Body Algorithms</figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/casadi_logo.png" class="quarto-figure quarto-figure-center" style="width:70.0%"></p>
<figcaption>CasADi - Algorithmic Differentiation</figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/ipopt_logo.png" class="quarto-figure quarto-figure-center" style="width:70.0%"></p>
<figcaption>IPOPT - Nonlinear Solver</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/opti_scheme.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="biped-trajectory-optimization-3" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<p>Application of this “framework” yields sequance of optimal states and control to be applied to the robot</p>

<img data-src="images/figures/horizon_trajectory.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="biped-trajectory-optimization-4" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<h3 id="initial-guess-for-the-solver">Initial Guess for the Solver</h3>
<div class="columns">
<div class="column" style="width:55%;">
<p>Nonconvex optimization is prone to local minima and infeasibility and usually require good initial guess, there are plenty of options here, one is to simply use mocap and mimic human motion</p>
</div><!-- {width="50%"} --><div class="column" style="width:2%;">

</div><!-- empty column to create gap --><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/figures/atalas_human_walk.gif" class="quarto-figure quarto-figure-left" style="width:80.0%"></p>
</figure>
</div>
</div><!-- {fig-align='top' width=70%}  --><!-- {fig-align='top' width=70%} -->
</div>
</section>
<section id="biped-trajectory-optimization-5" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<h3 id="motiongpt-as-initial-guess">MotionGPT as Initial Guess</h3>
<p>Nowadays another source of “human like” motion is coming from learning, so we use it instead of MOCAP!</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/motion_gpt.gif"></p>
<figcaption>Motion GPT trajectory</figcaption>
</figure>
</div>
</div><!-- {width="50%"} --><div class="column" style="width:3%;">

</div><!-- empty column to create gap --><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-left">
<figure>
<p><img data-src="images/figures/mit_walking.gif" class="quarto-figure quarto-figure-left" style="width:80.0%"></p>
<figcaption>Dynamicaly feasible trajectory</figcaption>
</figure>
</div>
</div><!-- {fig-align='top' width=70%}  --><!-- {fig-align='top' width=70%} -->
</div>
</section>
<section id="biped-trajectory-optimization-6" class="slide level2">
<h2>Biped Trajectory Optimization</h2>
<h3 id="energy-effective-periodic-motions">Energy effective periodic motions</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><video data-src="videos/periodic_1.mp4" loop="true" controls=""><a href="videos/periodic_1.mp4">Video</a></video></p>
</div><div class="column" style="width:50%;">
<p><video data-src="videos/periodic_2.mp4" loop="true" controls=""><a href="videos/periodic_2.mp4">Video</a></video></p>
</div>
</div>
</section>
<section id="reinforcement-learning" class="slide level2">
<h2>Reinforcement Learning</h2>
<h3 id="learning-to-walk-in-minutes-using-massively-parallel-deep-rl">Learning to Walk in Minutes Using Massively Parallel Deep RL</h3>
<iframe data-external="1" src="https://www.youtube.com/embed/8sO7VS3q8d0?si=bD4siwLpDaMB3uqy" width="100%" height="65%" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</section>
<section id="reinforcement-learning-1" class="slide level2">
<h2>Reinforcement Learning</h2>
<h3 id="general-ideas">General ideas</h3>
<ul>
<li>PPO is mainly used as learning algorithm</li>
<li>The learning strategies can be split into two categories: Learning w/w-o References</li>
<li>Bipedal robots are much more vulnerable to unreliable dynamics</li>
<li>All methods use joint positions as actions</li>
</ul>
<!-- ## Reinforcement Learning
### Algo example

::: {style="font-size: 75%;"}

State: Roll, pitch, base angular velocities, positions and velocities of joints, last action, privileged visual information, privileged physics information
Reward:
$$
\begin{gathered}
r_{\text {skill }}=r_{\text {forward }}+r_{\text {energy }}+r_{\text {alive }} \\
r_{\text {forward }}=-\alpha_1 *\left|v_x-v_x^{\text {target }}\right|-\alpha_2 *\left|v_y\right|^2+\alpha_3 * e^{-\left|\omega_{\text {yaw }}\right|} \\
r_{\text {energy }}=-\alpha_4 * \sum_{j \in \text { joints }}\left|\tau_j \dot{q}_j\right|^2, \quad r_{\text {alive }}=2 \\
r_{\text {penetrate }}=-\sum_p\left(\alpha_5 * \mathbb{1}[p]+\alpha_6 * d(p)\right) * v_x
\end{gathered}
$$

* Five parkour skills: climbing over high obstacles, leaping over large gaps, crawling beneath low barriers, squeezing through thin slits, and running
* Two-stage RL: gradually learn while minimizing penetrations and mechanical energy and fine-tune with realistic dynamics
* Distill skills into a single vision-based parkour policy
* Refresh rate of onboard depth image is 10Hz, policy operates at 50Hz.
::: -->
</section>
<section id="reinforcement-learning-2" class="slide level2">
<h2>Reinforcement Learning</h2>
<h3 id="reward-design">Reward design</h3>

<img data-src="images/figures/reward_design.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"><div style="font-size: 75%;">
<p>Typical rewards from https://gmargo11.github.io/walk-these-ways/</p>
</div>
</section>
<section id="reinforcement-learning-3" class="slide level2">
<h2>Reinforcement Learning</h2>
<h3 id="our-results-with-quadruped">Our results with quadruped</h3>
<video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="videos/rl_go.mp4"></video>
</section>
<section id="reinforcement-learning-4" class="slide level2">
<h2>Reinforcement Learning</h2>
<h3 id="our-results-with-biped">Our results with biped</h3>
<video id="video_shortcode_videojs_video2" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="videos/rl_gr1.mp4"></video>
<!-- ## Reinforcement Learning
### HumanMimic: Learning Natural Locomotion and Transitions for Humanoid Robots

 -->
</section>
<section id="thanks" class="title-slide slide level1 center" data-background-color="#40666e">
<h1>Thanks!</h1>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/figures/sber_qr.png" class="quarto-figure quarto-figure-center" style="width:40.0%"></p>
</figure>
</div>
<div class="quarto-auto-generated-content">
<p><img src="images/logos/sber_logo.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="slides_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"theme":"whiteboard","width":3},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: true,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    <script>videojs(video_shortcode_videojs_video1);</script>
    <script>videojs(video_shortcode_videojs_video2);</script>
    

</body></html>